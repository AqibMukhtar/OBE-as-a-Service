{"ast":null,"code":"import jwtDecode from \"jwt-decode\";\nimport http from \"./httpService\";\nimport { apiUrl } from \"../config.json\";\nconst apiEndPoint = apiUrl;\nconst tokenKey = \"token\"; // http.setJwt(getJwt());\n\nexport async function login(userName, password, type) {\n  const {\n    data: jwt\n  } = await http.post(apiEndPoint, {\n    userName,\n    password,\n    type\n  });\n\n  if (Object.keys(jwt.data).length == 0) {\n    alert(\"Invalid Credential\");\n    return;\n  } else {\n    localStorage.setItem(tokenKey, jwt.data);\n    console.log(\"You have logged in successfully\");\n  }\n\n  console.log(jwt.data);\n}\nexport function logout() {\n  localStorage.removeItem(tokenKey);\n}\nexport function getCurrentUser() {\n  try {\n    const jwt = localStorage.getItem(tokenKey);\n    return jwtDecode(jwt);\n  } catch (ex) {\n    return null;\n  }\n} // export function getJwt() {\n//   return localStorage.getItem(tokenKey);\n// }\n\nexport default {\n  login,\n  logout,\n  getCurrentUser //getJwt,\n\n};","map":{"version":3,"sources":["D:/OBEaaS/gitOBEaaS/OBE-as-a-Service/Presentation/src/services/authService.js"],"names":["jwtDecode","http","apiUrl","apiEndPoint","tokenKey","login","userName","password","type","data","jwt","post","Object","keys","length","alert","localStorage","setItem","console","log","logout","removeItem","getCurrentUser","getItem","ex"],"mappings":"AAAA,OAAOA,SAAP,MAAsB,YAAtB;AACA,OAAOC,IAAP,MAAiB,eAAjB;AACA,SAASC,MAAT,QAAuB,gBAAvB;AAEA,MAAMC,WAAW,GAAGD,MAApB;AACA,MAAME,QAAQ,GAAG,OAAjB,C,CAEA;;AAEA,OAAO,eAAeC,KAAf,CAAqBC,QAArB,EAA+BC,QAA/B,EAAyCC,IAAzC,EAA+C;AACpD,QAAM;AAAEC,IAAAA,IAAI,EAAEC;AAAR,MAAgB,MAAMT,IAAI,CAACU,IAAL,CAAUR,WAAV,EAAuB;AACjDG,IAAAA,QADiD;AAEjDC,IAAAA,QAFiD;AAGjDC,IAAAA;AAHiD,GAAvB,CAA5B;;AAKA,MAAII,MAAM,CAACC,IAAP,CAAYH,GAAG,CAACD,IAAhB,EAAsBK,MAAtB,IAAgC,CAApC,EAAuC;AACrCC,IAAAA,KAAK,CAAC,oBAAD,CAAL;AACA;AACD,GAHD,MAGO;AACLC,IAAAA,YAAY,CAACC,OAAb,CAAqBb,QAArB,EAA+BM,GAAG,CAACD,IAAnC;AACAS,IAAAA,OAAO,CAACC,GAAR,CAAY,iCAAZ;AACD;;AACDD,EAAAA,OAAO,CAACC,GAAR,CAAYT,GAAG,CAACD,IAAhB;AACD;AAED,OAAO,SAASW,MAAT,GAAkB;AACvBJ,EAAAA,YAAY,CAACK,UAAb,CAAwBjB,QAAxB;AACD;AAED,OAAO,SAASkB,cAAT,GAA0B;AAC/B,MAAI;AACF,UAAMZ,GAAG,GAAGM,YAAY,CAACO,OAAb,CAAqBnB,QAArB,CAAZ;AACA,WAAOJ,SAAS,CAACU,GAAD,CAAhB;AACD,GAHD,CAGE,OAAOc,EAAP,EAAW;AACX,WAAO,IAAP;AACD;AACF,C,CAED;AACA;AACA;;AAEA,eAAe;AACbnB,EAAAA,KADa;AAEbe,EAAAA,MAFa;AAGbE,EAAAA,cAHa,CAIb;;AAJa,CAAf","sourcesContent":["import jwtDecode from \"jwt-decode\";\r\nimport http from \"./httpService\";\r\nimport { apiUrl } from \"../config.json\";\r\n\r\nconst apiEndPoint = apiUrl;\r\nconst tokenKey = \"token\";\r\n\r\n// http.setJwt(getJwt());\r\n\r\nexport async function login(userName, password, type) {\r\n  const { data: jwt } = await http.post(apiEndPoint, {\r\n    userName,\r\n    password,\r\n    type,\r\n  });\r\n  if (Object.keys(jwt.data).length == 0) {\r\n    alert(\"Invalid Credential\");\r\n    return;\r\n  } else {\r\n    localStorage.setItem(tokenKey, jwt.data);\r\n    console.log(\"You have logged in successfully\");\r\n  }\r\n  console.log(jwt.data);\r\n}\r\n\r\nexport function logout() {\r\n  localStorage.removeItem(tokenKey);\r\n}\r\n\r\nexport function getCurrentUser() {\r\n  try {\r\n    const jwt = localStorage.getItem(tokenKey);\r\n    return jwtDecode(jwt);\r\n  } catch (ex) {\r\n    return null;\r\n  }\r\n}\r\n\r\n// export function getJwt() {\r\n//   return localStorage.getItem(tokenKey);\r\n// }\r\n\r\nexport default {\r\n  login,\r\n  logout,\r\n  getCurrentUser,\r\n  //getJwt,\r\n};\r\n"]},"metadata":{},"sourceType":"module"}